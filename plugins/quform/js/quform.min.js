!function(h){"use strict";var e;function g(e,t){if(this.$form=h(e),this.submitted=!1,this.nextUploadId=1,this.removedUploadUids=[],this.captchaRefreshQueue=[],this.uploadQueue=[],this.uploadElements=[],this.logicCache={},!this.$form.length)throw new Error("Form not found.");if(this.$form.data("quform"))throw new Error("Quform already attached.");this.$form.data("quform",this),this.options=h.extend({},g.defaults,t),h.isFunction(h.scrollTo)&&h.isFunction(h.fn.scrollTo)||(this.options.scrolling=!1),this.$wrapper=this.$form.closest(".quform"),this.$elements=h(".quform-elements",this.$form),this.$loading=h(".quform-loading",this.$form),this.currentPageId=this.options.currentPageId,this.submitStartTime=0,this.submitEndTime=0,this.successTimeout=null,this.errorShowFunction=this.$wrapper.hasClass("quform-errors-absolute")?"fadeIn":"quformShowSlide",this.init()}g.defaults={errorsIcon:"",scrolling:!0,scrollSpeed:800,scrollDelay:0,scrollOffset:-50,hasPages:!1,pages:[],logic:{logic:[],dependents:[],elementIds:[],dependentElementIds:[],animate:!0}},g.prototype.init=function(){var s=this;this.setupInsideLabels(),this.setupEnhancedSelects(),this.setupEnhancedUploaders(),this.setupDatepickers(),this.setupTimepickers(),this.applyAllLogic(!0),this.setupTooltips(),this.setupCaptchaImages(),this.$wrapper.hasClass("quform-prevent-fouc")&&this.$wrapper.removeClass("quform-prevent-fouc"),this.options.ajax&&(s.$form.on("submit",function(e){if(e.preventDefault(),window.grecaptcha){var t=s.$form.find(".quform-recaptcha");if(t.length){var o=t.data("config");if("v3"===o._version)return void window.grecaptcha.execute(t.data("recaptcha-id"),{action:"quform"}).then(function(e){t.find(".g-recaptcha-response").val(e),s.submit()});if("invisible"===o.size)return void window.grecaptcha.execute(t.data("recaptcha-id"))}}if(window.hcaptcha){var i=s.$form.find(".quform-hcaptcha");if(i.length)if("invisible"===i.data("config").size)return void window.hcaptcha.execute(i.data("hcaptcha-id"))}s.submit()}),h(".quform-back",s.$form).on("click",function(e){e.preventDefault(),s.submit("back")}),s.$form.addClass("quform-ajax-initialized")),h(".quform-field-select.quform-submit-on-choice",s.$form).on("change",function(){s.$form.submit()}),h(".quform-field-radio.quform-submit-on-choice",s.$form).on("click",function(){s.$form.submit()}),h(".quform-button-submit > button",s.$form).each(function(){var e,t,o=h(this),i=o.closest(".quform-button-submit"),r=i.data("animation"),n=1e3,a=s.options.scrollDelay;r&&(e="quform-button-animation-"+r,"two"===r&&(n=3200),o.on("click",function(){s.options.scrollDelay=n,i.removeClass(e),"number"==typeof t&&(clearTimeout(t),t=null),setTimeout(function(){i.addClass(e),t=setTimeout(function(){i.removeClass(e),s.options.scrollDelay=a},n)},4)}))})},g.prototype.setupInsideLabels=function(){var r=this;h.InFieldLabels?h(".quform-labels-inside > .quform-spacer > .quform-label",r.$form).each(function(){var e=h(this),t=e.parent().find(".quform-input"),o=t.find(".quform-field"),i={top:parseInt(o.css("padding-top"),10)+parseInt(o.css("border-top-width"),10)};r.options.isRtl?i.right=parseInt(o.css("padding-right"),10)+parseInt(o.css("border-right-width"),10):i.left=parseInt(o.css("padding-left"),10)+parseInt(o.css("border-left-width"),10),e.addClass("quform-label-inside").css(i).appendTo(t),new h.InFieldLabels(e[0],o[0])}):h(".quform-labels-inside > .quform-spacer > .quform-label",r.$form).show()},g.prototype.setupEnhancedSelects=function(){var r;"function"==typeof h.fn.select2&&(h(".quform-field-select-enhanced",(r=this).$form).each(function(){var e=h(this),t=e.data("options"),o={theme:"quform",language:{noResults:function(){return t.noResultsFound}}};t.search||(o.minimumResultsForSearch=Infinity),t.rtl&&(o.dir="rtl"),e.select2(o);var i="quform-"+r.options.id+"-select2";g.isNonEmptyString(r.options.theme)&&(i+=" quform-theme-"+r.options.theme),e.on("select2:opening",function(){e.data("select2").$dropdown.addClass(i)})}),h(".quform-field-multiselect-enhanced",r.$form).each(function(){var e=h(this),t=e.data("options"),o={theme:"quform",language:{noResults:function(){return t.noResultsFound}}};g.isNonEmptyString(t.placeholder)&&(o.placeholder=t.placeholder),t.rtl&&(o.dir="rtl"),e.select2(o);var i="quform-"+r.options.id+"-select2";g.isNonEmptyString(r.options.theme)&&(i+=" quform-theme-"+r.options.theme),e.on("select2:opening",function(){e.data("select2").$dropdown.addClass(i)})}))},g.prototype.setupEnhancedUploaders=function(){var a;h.isFunction(h.fn.fileupload)&&h.support.xhrFileUpload&&h.support.xhrFormDataFileUpload&&h(".quform-field-file-enhanced",(a=this).$form).each(function(){var e,t=h(this),o=t.closest(".quform-input-file"),i=t.data("config"),r=h('<div class="quform-upload-files quform-cf">').insertAfter(o).hide();i.queued=0,a.uploadElements.push(i),e="dropzone"===i.buttonType?a.createUploadButton("quform-upload-dropzone",i):a.createUploadButton("quform-upload-button",i),o.append(e.append(t));var n=t.closest(".quform-element").addClass("quform-enhanced-upload");t.fileupload({dataType:"json",paramName:i.name+"[]",dropZone:e,change:function(){n.find(".quform-error").empty().remove()},add:function(e,t){a.uploadAdd(t,i,r)},start:function(){h(".quform-upload-progress-wrap",a.$form).show()},progress:function(e,t){var o=Math.min(100,t.loaded/t.total*100);h(".quform-upload-progress-bar",a.$form).css("width",o+"%"),h(".quform-upload-filename",a.$form).text(t.files[0].name)}})})},g.prototype.createUploadButton=function(e,t){var o,i=h('<div class="'+e+'">');return i.append(h('<span class="'+e+'-text">').html(t.buttonText)),g.isNonEmptyString(t.buttonIcon)&&(o=h('<span class="'+e+'-icon">').append(h('<i class="'+t.buttonIcon+'">')),i.addClass(e+"-icon-"+t.buttonIconPosition),"right"===t.buttonIconPosition?i.append(o):i.prepend(o)),i},g.prototype.setupDatepickers=function(){var m;h.isFunction(h.fn.kendoDatePicker)&&h(".quform-field-date",(m=this).$form).each(function(){var o=h(this).addClass("quform-field-date-enhanced"),e=o.closest(".quform-input-date"),t=e.find("> .quform-field-icon"),i=o.data("options"),r=h("<input>",{type:"hidden",name:o.attr("name"),value:o.val()}).data("default",o.val()).addClass("quform-field-date-hidden").insertAfter(o);o.attr("name",""),i.placeholder?o.attr("placeholder",i.placeholder):o.removeAttr("placeholder");var n,a,s={start:i.start||"month",depth:i.depth||"month",culture:i.locale||"en-US"};i.format?s.format=i.format:s.format=kendo.getCulture(i.locale).calendars.standard.patterns.d,i.showFooter||(s.footer=!1),!i.min||null!==(n=kendo.parseDate(i.min,"yyyy-MM-dd"))&&(s.min=n),!i.max||null!==(a=kendo.parseDate(i.max,"yyyy-MM-dd"))&&(s.max=a),o.kendoDatePicker(s),o.removeClass("k-input").closest(".k-datepicker").removeAttr("class").addClass("k-widget k-datepicker k-header");var u=o.data("kendoDatePicker"),c="quform-datepicker quform-"+m.options.id+"-datepicker quform-"+i.identifier+"-datepicker";g.isNonEmptyString(m.options.theme)&&(c+=" quform-theme-"+m.options.theme),u.dateView.popup.element.addClass(c),e.find(".k-select").hide(),i.autoOpen&&o.on("click focus",function(){u.open()}).on("blur",function(){u.close()}),t.on("click",function(){u.open()});var l=function(){var e,t=o.val();g.isNonEmptyString(t)?null===(e=kendo.parseDate(t,s.format,s.culture))?r.val("9999-99-99"):r.val(kendo.toString(e,"yyyy-MM-dd")):r.val("")};u.bind("change",l),o.on("blur.quformDatePicker keyup.quformDatePicker",l);var f,p=o.val();!g.isNonEmptyString(p)||null!==(f=kendo.parseDate(p,"yyyy-MM-dd"))&&(u.value(f),l())})},g.prototype.setupTimepickers=function(){var d;h.isFunction(h.fn.kendoTimePicker)&&h(".quform-field-time",(d=this).$form).each(function(){var o=h(this).addClass("quform-field-time-enhanced"),e=o.closest(".quform-input-time"),t=e.find("> .quform-field-icon"),i=o.data("options"),r=h("<input>",{type:"hidden",name:o.attr("name"),value:o.val()}).data("default",o.val()).addClass("quform-field-time-hidden").insertAfter(o);o.attr("name",""),i.placeholder?o.attr("placeholder",i.placeholder):o.removeAttr("placeholder");var n,a,s,u={culture:i.locale||"en-US"};i.interval&&(n=parseInt(i.interval,10),isNaN(n)||(u.interval=n)),i.format?u.format=i.format:u.format=kendo.getCulture(i.locale).calendars.standard.patterns.t,!i.min||null!==(a=kendo.parseDate(i.min,"HH:mm"))&&(u.min=a),!i.max||null!==(s=kendo.parseDate(i.max,"HH:mm"))&&(u.max=s),o.kendoTimePicker(u),o.removeClass("k-input").closest(".k-timepicker").removeAttr("class").addClass("k-widget k-timepicker k-header");var c=o.data("kendoTimePicker"),l="quform-timepicker quform-"+d.options.id+"-timepicker quform-"+i.identifier+"-timepicker";g.isNonEmptyString(d.options.theme)&&(l+=" quform-theme-"+d.options.theme),c.timeView.popup.element.addClass(l),e.find(".k-select").hide(),i.autoOpen&&o.on("click focus",function(){c.open()}).on("blur",function(){c.close()}),t.on("click",function(){c.open()});var f=function(){var e,t=o.val();g.isNonEmptyString(t)?null===(e=kendo.parseDate(t,u.format,u.culture))?r.val("99:99"):r.val(kendo.toString(e,"HH:mm")):r.val("")};c.bind("change",f),o.on("blur.quformTimePicker keyup.quformTimePicker",f);var p,m=o.val();!g.isNonEmptyString(m)||null!==(p=kendo.parseDate(m,"HH:mm"))&&(c.value(p),f())})},g.prototype.setupTooltips=function(){var e;h.isFunction(h.fn.qtip)&&this.options.tooltipsEnabled&&(e={style:{classes:this.options.tooltipClasses},position:{my:this.options.tooltipMy,at:this.options.tooltipAt,viewport:!0,adjust:{method:"shift shift"}}},h(".quform-tooltip-hover",this.$form).qtip(h.extend({},e,{content:{text:function(){return h(this).closest(".quform-input").find("> .quform-tooltip-content").html()}}})),h(".quform-tooltip-click",this.$form).qtip(h.extend({},e,{show:{event:"focus"},hide:{event:"unfocus"},content:{text:function(){return h(this).closest(".quform-input").find("> .quform-tooltip-content").html()}}})),h(".quform-tooltip-icon-hover",this.$form).qtip(h.extend({},e,{content:{text:function(){return h(this).find(".quform-tooltip-icon-content").html()}}})),h(".quform-tooltip-icon-click",this.$form).qtip(h.extend({},e,{show:{event:"click"},hide:{event:"unfocus"},content:{text:function(){return h(this).find(".quform-tooltip-icon-content").html()}}})),h(".quform-labels-inside > .quform-spacer > .quform-inner > .quform-input > .quform-label",this.$form).on("mouseenter",function(){h(this).siblings(".quform-tooltip-hover").qtip("show")}).on("mouseleave",function(){h(this).siblings(".quform-tooltip-hover").qtip("hide")}))},g.prototype.setupCaptchaImages=function(){var e=this;h(".quform-captcha-image img",this.$form).on("mouseenter",function(){h(this).stop().fadeTo(400,"0.3")}).on("mouseleave",function(){h(this).stop().fadeTo(400,"1.0")}).on("click",function(){e.captchaRefreshQueue.push(h(this)),e.processCaptchaRefreshQueue()})},g.prototype.processCaptchaRefreshQueue=function(t){var o,i=this;i.captchaRefreshQueue.length?(o=i.captchaRefreshQueue.shift(),h.ajax({type:"GET",url:quformL10n.ajaxUrl,dataType:"json",data:{action:"quform_regenerate_captcha",quform_form_id:i.options.id,quform_unique_id:i.options.uniqueId,quform_element_id:o.data("element-id")}}).done(function(e){"success"===(e=g.sanitizeResponse(e)).type&&o.attr("src",e.image).animate({opacity:1}),i.captchaRefreshQueue.length?i.processCaptchaRefreshQueue(t):"function"==typeof t&&t.call(i)})):"function"==typeof t&&t.call(i)},g.prototype.applyAllLogic=function(e){this.logicCache={},this.options.logic.elementIds.length&&(this.applyLogic(this.options.logic.elementIds,e),e&&this.applyDependentLogic(this.options.logic.dependentElementIds))},g.prototype.applyLogic=function(e,t){for(var o=0,i=e.length;o<i;o++)this.applyElementLogic(e[o],t)},g.prototype.applyElementLogic=function(e,t){if(this.options.logic&&this.options.logic.logic){var o=this.options.logic.logic[e];if(o&&o.rules&&o.rules.length){for(var i=0,r=o.action,n=this.options.id+"_"+e,a=0;a<o.rules.length;a++)this.isLogicRuleMatch(o.rules[a])&&i++;"any"===o.match&&0<i||"all"===o.match&&i===o.rules.length||(r=!r);var s=this,u=h(".quform-element-"+n,s.$form),c=r?"show":"hide";!t&&this.options.logic.animate?u.animate({opacity:c,height:c,marginTop:c,marginBottom:c,paddingTop:c,paddingBottom:c},{duration:400,complete:function(){s.updateFancybox()}}):(u[c](),t||s.updateFancybox())}}},g.prototype.applyDependentLogic=function(e){if(this.options.logic&&this.options.logic.dependents)for(var r=this,t=0,o=e.length;t<o;t++){var i,n=this.options.logic.dependents[e[t]],a=this.options.id+"_"+e[t],s=h(".quform-field-"+a,this.$form);s.length&&(s.is("select")||s.is('input[type="checkbox"]')||s.is('input[type="radio"]')||s.is('input[type="hidden"]')?i="change.quform":s.is('textarea, input[type="text"], input[type="email"], input[type="password"]')&&(i="keyup.quform blur.quform",(s.hasClass("quform-field-date-enhanced")||s.hasClass("quform-field-time-enhanced"))&&(i="change.quform")),i&&function(e,t,o,i){e.on(t,function(){r.logicCache[i]=[],setTimeout(function(){r.applyLogic(o)},0)})}(s,i,n,a))}},g.prototype.isLogicRuleMatch=function(e){var t=this.options.id+"_"+e.elementId;if(h.isArray(this.logicCache[t])){if(this.logicCache[t].length)for(var o=0,i=this.logicCache[t].length;o<i;o++)if(this.logicCache[t][o].operator===e.operator&&this.logicCache[t][o].value===e.value)return this.logicCache[t][o].result}else this.logicCache[t]=[];var r,n,a=h(".quform-field-"+t,this.$form),s=!1;return a.length&&(a.is('select:not([multiple]), input[type="hidden"], textarea, input[type="text"], input[type="email"], input[type="password"]')?(n=a.val(),a.hasClass("quform-field-date-enhanced")?(r="date",n=a.closest(".quform-input").find(".quform-field-date-hidden").val()):a.hasClass("quform-field-time-enhanced")&&(r="time",n=a.closest(".quform-input").find(".quform-field-time-hidden").val()),s=this.isLogicValueMatch(n,e,r)):a.is('input[type="checkbox"]')?(n=[],a.filter(":checked").each(function(){n.push(h(this).val())}),s=this.isLogicArrayValueMatch(n,e)):a.is('input[type="radio"]')?(n=a.filter(":checked").val()||"",s=this.isLogicValueMatch(n,e)):a.is("select[multiple]")&&(n=a.val()||[],s=this.isLogicArrayValueMatch(n,e))),this.logicCache[t].push({operator:e.operator,value:e.value,result:s}),s},g.prototype.isLogicValueMatch=function(e,t,o){switch("string"!=typeof e&&(e=""),t.operator){case"eq":return e===t.value;case"neq":return e!==t.value;case"empty":return""===e;case"not_empty":return""!==e;case"gt":return"date"===o?1===g.compareDates(e,t.value):"time"===o?1===g.compareTimes(e,t.value):g.isNumeric(e)&&g.isNumeric(t.value)&&parseFloat(e)>parseFloat(t.value);case"lt":return"date"===o?-1===g.compareDates(e,t.value):"time"===o?-1===g.compareTimes(e,t.value):g.isNumeric(e)&&g.isNumeric(t.value)&&parseFloat(e)<parseFloat(t.value);case"contains":return-1!==e.indexOf(t.value);case"starts_with":return 0===e.indexOf(t.value);case"ends_with":return-1!==e.indexOf(t.value,t.value.length)}return!1},g.prototype.isLogicArrayValueMatch=function(e,t){var o=!1;if(e.length){if("not_empty"===t.operator)o=!0;else for(var i=0;i<e.length;i++)if(this.isLogicValueMatch(e[i],t)){o=!0;break}}else"neq"!==t.operator&&"empty"!==t.operator||(o=!0);return o},g.prototype.uploadAdd=function(e,i,r){var t,o,n=this,a=e.files[0];i.max&&i.queued===i.max?this.addElementError(i.identifier,i.tooMany.replace("%max%",i.max))[this.errorShowFunction]():!i.allowedExtensions||g.isValidFile(a,i.allowedExtensions)?i.size&&a.size>i.size?this.addElementError(i.identifier,i.tooBigWithFilename.replace("%filename%",a.name))[this.errorShowFunction]():(t=this.nextUploadId++,e.formData={quform_ajax_uploading:1,quform_form_id:this.options.id,quform_form_uid:this.options.uniqueId,quform_element_id:i.id,quform_element_identifier:i.identifier,quform_upload_id:t},this.uploadQueue.push(e),i.queued++,o=e.context=h('<div class="quform-upload-file">').data("quform-upload-id",t),h('<span class="quform-upload-file-name">').text(a.name).appendTo(o),h('<span class="quform-upload-file-remove">').attr("title",quformL10n.removeFile).on("click",function(){var e=h(this).closest(".quform-upload-file"),t=e.data("quform-upload-id");r.trigger("quform:beforeUploadRemoved",[a,t,e]);for(var o=n.uploadQueue.length;o--;)n.uploadQueue[o].formData.quform_upload_id===t&&n.uploadQueue.splice(o,1);e.data("quform-upload-uid")&&n.removedUploadUids.push(e.data("quform-upload-uid")),e.remove(),0===r.children().length&&r.hide(),i.queued--,r.trigger("quform:afterUploadRemoved",[a,t,e])}).appendTo(o),r.append(o).show(),r.trigger("quform:uploadAdded",[a,t,o])):this.addElementError(i.identifier,i.notAllowedTypeWithFilename.replace("%filename%",a.name))[this.errorShowFunction]()},g.prototype.processUploadQueue=function(){var t=this,o=t.uploadQueue.shift();o.submit().done(function(e){"success"===(e=g.sanitizeResponse(e)).type?(o.context.addClass("quform-uploaded").prepend(h('<span class="quform-upload-tick"><i class="qicon-check">')).data("quform-upload-uid",e.uid),t.uploadQueue.length?t.processUploadQueue():(h(".quform-upload-progress-wrap",t.$form).hide(),t.submitted=!1,t.submit())):t.uploadError(o,e.message)}).fail(function(){t.uploadError(o,quformL10n.ajaxError)})},g.prototype.uploadError=function(e,t){h(".quform-upload-progress-wrap",this.$form).hide(),this.uploadQueue.unshift(e),this.allowResubmission(),this.addElementError(e.formData.quform_element_identifier,t)[this.errorShowFunction](),this.scrollTo(h(".quform-element-"+e.formData.quform_element_identifier,this.$form))},g.prototype.submit=function(e){var t,o=this;o.submitted||(o.submitStartTime=g.timeNow(),o.submitted=!0,e="back"===e?"back":"submit",o.$form.trigger("quform:submit",[o,e]),o.$loading.fadeIn().addClass("quform-loading-triggered"),"submit"===e&&this.uploadQueue.length?o.processUploadQueue():(t={quform_ajax:1,quform_submit:e,quform_removed_upload_uids:o.removedUploadUids.join(",")},o.$form.ajaxSubmit({type:"POST",data:t,dataType:"json",iframe:!0,iframeSrc:"about:blank",url:"",success:function(e){switch(o.submitEndTime=g.timeNow(),(e=g.sanitizeResponse(e)).type){case"success":o.responseSuccess(e.confirmation);break;case"error":o.responseError(e);break;case"page":o.allowResubmission(),o.goToPage(e.page);break;case"invalid":o.responseInvalid(e)}},error:function(){o.submitEndTime=g.timeNow(),o.responseInvalid({message:quformL10n.ajaxError})}})))},g.prototype.responseSuccess=function(e){var t=this;t.$form.trigger("quform:successStart",[t,e]),t.$loading.addClass("quform-loading-success");var o=function(){switch(e.type){case"message":t.reset(e.resetForm),t.showSuccessMessage(e);break;case"message-redirect-page":case"message-redirect-url":t.allowResubmission(),t.showSuccessMessage(e),setTimeout(function(){window.location=e.redirectUrl},1e3*parseFloat(e.redirectDelay));break;case"redirect-page":case"redirect-url":t.allowResubmission(),window.location=e.redirectUrl;break;case"reload":window.location.reload()}};e.hideForm?t.$elements.quformHideSlide(function(){o()}):o()},g.prototype.showSuccessMessage=function(e){var t=this,o=h('<div class="quform-success-message-animate">').hide(),i=h('<div class="quform-success-message quform-success-message-'+t.options.id+'">').appendTo(o);g.isNonEmptyString(e.messageIcon)&&i.addClass("quform-success-message-has-icon").append('<div class="quform-success-message-icon"><i class="'+e.messageIcon+'"></i></div>'),i.append(h('<div class="quform-success-message-content">').html(e.message)),o["below"===e.messagePosition?"insertAfter":"insertBefore"](t.$elements).quformShowSlide(),setTimeout(function(){t.scrollTo(o)},t.getScrollDelay());var r=1e3*parseFloat(e.messageTimeout);0<r&&(t.successTimeout=setTimeout(function(){o.quformHideSlide(function(){t.updateFancybox()})},r))},g.prototype.responseError=function(e){var i=this,r=null,t=!1;i.$form.trigger("quform:errorStart",[i,e]),i.allowResubmission(),"object"==typeof e.error&&null!==e.error&&e.error.enabled&&"string"==typeof e.error.content&&e.error.content.length&&(i.errorMessage(e.error.content,e.error.title),t=!0),h.each(e.errors,function(e,t){var o=h(".quform-element-"+e,i.$form);o.length&&(i.addElementError(e,t),r=r||o)}),i.options.hasPages&&e.page!==i.currentPageId&&i.goToPage(e.page),h(".quform-error",i.$form)[this.errorShowFunction](),!t&&r&&setTimeout(function(){i.scrollTo(r)},i.getScrollDelay()),i.updateFancybox(),i.$form.trigger("quform:errorEnd",[i,e])},g.prototype.responseInvalid=function(e){this.allowResubmission(),this.errorMessage(e.message,quformL10n.errorMessageTitle)},g.prototype.goToPage=function(e){var t,o,i,r=h(".quform-page-"+e,this.$form);r.length&&1<this.options.pages.length&&(-1<(t=h.inArray(e,this.options.pages))&&(this.$form.trigger("quform:goToPageStart",[this,r,e,t]),this.currentPageId=e,h('input[name="quform_current_page_id"]',this.$form).val(e),h(".quform-current-page",this.$form).hide().removeClass("quform-current-page"),r.show().addClass("quform-current-page"),(o=this.$form.closest(".quform")).removeClass("quform-is-first-page quform-is-last-page"),0===t?o.addClass("quform-is-first-page"):t===this.options.pages.length-1&&o.addClass("quform-is-last-page"),this.scrollTo(this.$form),i=Math.round((t+1)/this.options.pages.length*100),"numbers"===this.options.pageProgressType||"percentage"===this.options.pageProgressType?(h(".quform-page-progress-bar",this.$form).width(i+"%"),"numbers"===this.options.pageProgressType?h(".quform-page-progress-text > .quform-page-progress-number",this.$form).text(t+1):h(".quform-page-progress-text > .quform-page-progress-percentage",this.$form).text(i)):"tabs"===this.options.pageProgressType&&(h(".quform-page-progress-tab.quform-current-tab",this.$form).removeClass("quform-current-tab"),h(".quform-page-progress-tab",this.$form).filter(function(){return h(this).data("id")===e}).addClass("quform-current-tab")),this.$form.trigger("quform:goToPageEnd",[this,r,e,t])))},g.prototype.allowResubmission=function(){var e=this;e.$loading.removeClass("quform-loading-triggered").fadeOut(function(){e.$loading.removeClass("quform-loading-success")}),h(".quform-error-message, .quform-error, .quform-success-message-animate",e.$form).remove(),h(".quform-has-error",e.$form).removeClass("quform-has-error"),"number"==typeof e.successTimeout&&(clearTimeout(e.successTimeout),e.successTimeout=null),window.grecaptcha&&h(".quform-recaptcha",e.$form).each(function(){if("v3"!==h(this).data("config")._version)try{window.grecaptcha.reset(h(this).data("recaptcha-id"))}catch(e){}}),window.hcaptcha&&h(".quform-hcaptcha",e.$form).each(function(){try{window.hcaptcha.reset(h(this).data("hcaptcha-id"))}catch(e){}}),window.turnstile&&h(".quform-turnstile",e.$form).each(function(){try{window.turnstile.reset(h(this).data("turnstile-id"))}catch(e){}}),h(".quform-upload-progress-bar",e.$form).width(0),h(".quform-upload-filename",e.$form).text(""),e.submitted=!1},g.prototype.reset=function(e){var t=this;switch(t.$form.trigger("quform:resetStart",[t,e]),t.allowResubmission(),e){default:case"":t.$form.resetForm(),h("input.quform-field-date-enhanced",t.$form).each(function(){var e=h(this),t=e.closest(".quform-input").find(".quform-field-date-hidden").data("default"),o=e.data("kendoDatePicker"),t=g.isNonEmptyString(t)?kendo.parseDate(t,"yyyy-MM-dd"):null;o.value(t),o.trigger("change"),o.dateView.calendar&&o.dateView.calendar.navigate(null===t?new Date:t)}),h("input.quform-field-time-enhanced",t.$form).each(function(){var e=h(this),t=e.closest(".quform-input").find(".quform-field-time-hidden").data("default"),o=e.data("kendoTimePicker"),t=g.isNonEmptyString(t)?kendo.parseDate(t,"HH:mm"):null;o.value(t),o.trigger("change")}),h(".quform-field-hidden",t.$form).each(function(){var e=h(this);e.val(e.data("default")).trigger("change")});break;case"clear":t.$form.clearForm(),h("select",t.$form).each(function(){h(this).prop("selectedIndex",0)}),h("input.quform-field-date-enhanced",t.$form).each(function(){var e=h(this).data("kendoDatePicker");e.value(null),e.trigger("change"),e.dateView.calendar&&e.dateView.calendar.navigate(new Date)}),h("input.quform-field-time-enhanced",t.$form).each(function(){var e=h(this).data("kendoTimePicker");e.value(null),e.trigger("change")}),h(".quform-field-hidden",t.$form).val("").trigger("change");break;case"keep":}h(".quform-captcha-image img",t.$form).each(function(){t.captchaRefreshQueue.push(h(this))}),t.processCaptchaRefreshQueue(),h('input[type="text"], input[type="email"], textarea',t.$form).trigger("blur"),t.applyAllLogic(),h(".quform-field-select-enhanced, .quform-field-multiselect-enhanced",t.$form).trigger("change"),t.removedUploadUids=[],h(".quform-upload-files",t.$form).empty().hide();for(var o=0,i=t.uploadElements.length;o<i;o++)t.uploadElements[o].queued=0;h('input[type="file"]',t.$form).each(function(){var e=h(this);e.replaceWith(e.val("").clone(!0))}),h(".qtip").hide(),t.options.hasPages&&t.goToPage(t.options.pages[0]),t.$form.trigger("quform:resetEnd",[t,e])},g.prototype.errorMessage=function(e,t){var o=this,i=h('<div class="quform-error-message">').hide(),r=h('<div class="quform-error-message-inner">');"string"==typeof t&&t.length&&r.append(h('<div class="quform-error-message-title">').html(t)),r.append(h('<div class="quform-error-message-content">').html(e)).appendTo(i),o.$elements.prepend(i),i.quformShowSlide(),setTimeout(function(){o.scrollTo(i)},o.getScrollDelay())},g.prototype.addElementError=function(e,t){var o,i=h('<div class="quform-error quform-cf">'),r=h('<div class="quform-error-inner">').appendTo(i);return g.isNonEmptyString(this.options.errorsIcon)&&r.append(h('<span class="quform-error-icon">').append('<i class="'+this.options.errorsIcon+'"></i>')),r.append(h('<span class="quform-error-text">').html(t)),this.$wrapper.hasClass("quform-errors-absolute")&&((o=h('<span class="quform-error-close">').append('<i class="qicon-close">')).on("click",function(){h(this).closest(".quform-error").fadeOut()}),r.append(o)),h(".quform-element-"+e,this.$form).addClass("quform-has-error"),h(".quform-input-"+e,this.$form).after(i),i},g.prototype.scrollTo=function(e){var t;this.options.scrolling&&e&&e.length&&((t=this.getScrollElement())?t.scrollTo(e,this.options.scrollSpeed,{axis:"y",offset:this.options.scrollOffset}):g.isScrolledIntoView(e,this.options.scrollOffset)||h.scrollTo(e,this.options.scrollSpeed,{axis:"y",offset:this.options.scrollOffset}))},g.prototype.getScrollDelay=function(){return 0<this.options.scrollDelay?g.clamp(this.options.scrollDelay-(this.submitEndTime-this.submitStartTime),0,3200):0},g.prototype.getScrollElement=function(){var e=null;return this.$form.closest(".fancybox-slide").length?e=this.$form.closest(".quform").hasClass("quform-max-height")?this.$form.closest(".quform"):this.$form.closest(".fancybox-slide"):this.$form.closest(".fancybox-inner").length?e=this.$form.closest(".fancybox-inner"):this.$form.closest("#fancybox-content").length?this.$form.closest(".quform").hasClass("quform-custom-dimensions")&&(e=this.$form.closest("#fancybox-content > div")):this.$form.closest(".mfp-wrap").length&&(this.$form.closest(".quform").hasClass("quform-max-height")?e=this.$form.closest(".quform"):h.magnificPopup&&h.magnificPopup.instance&&h.magnificPopup.instance.fixedContentPos&&(e=this.$form.closest(".mfp-wrap"))),e},g.prototype.updateFancybox=function(){var e,t;this.options.updateFancybox&&h.isFunction(h.fn.fancybox)&&h.fancybox&&("2"===(e=g.getFancyboxVersion())?(t=h(".fancybox-wrap")).length&&t.is(":visible")&&h.fancybox.update():"1"===e&&(t=h("#fancybox-wrap")).length&&t.is(":visible")&&h.fancybox.resize())},g.getFancyboxVersion=function(){return h.isFunction(h.fn.fancybox)&&h.fancybox?g.isNonEmptyString(h.fancybox.version)?h.fancybox.version.charAt(0):"1":null},g.isScrolledIntoView=function(e,t){var o=h(window).scrollTop(),i=o+h(window).height(),r=e.offset().top,n=r+e.height();return t&&(r+=t),o<=n&&r<=i&&n<=i&&o<=r},g.formatFileSize=function(e){return 1073741824<=e?e=Math.round(e/1073741824*10)/10+" GB":1048576<=e?e=Math.round(e/1048576*10)/10+" MB":1024<=e?e=Math.round(e/1024*10)/10+" KB":e+=" bytes",e},(g.preLoadImages=function(e,t){for(var o=0;o<e.length;o++){var i=new Image;i.src=t?t+e[o]:e[o],g.preLoadImages.cache.push(i)}}).cache=[],g.sanitizeResponse=function(e){return null!==e&&"object"==typeof e&&"string"==typeof e.type&&0!==e.type.length||(e={type:"invalid",message:"The response from the server was invalid or malformed"}),e},g.sanitiseResponse=function(e){return g.sanitizeResponse(e)},g.compareDates=function(e,t){if(!g.isNonEmptyString(e)||!g.isNonEmptyString(t))return!1;if(e=kendo.parseDate(e,"yyyy-MM-dd"),t=kendo.parseDate(t,"yyyy-MM-dd"),null===e||null===t)return!1;var o=e.getTime(),i=t.getTime();return o<i?-1:i<o?1:0},g.compareTimes=function(e,t){if(!g.isNonEmptyString(e)||!g.isNonEmptyString(t))return!1;if(e=kendo.parseDate(e,"HH:mm"),t=kendo.parseDate(t,"HH:mm"),null===e||null===t)return!1;var o=e.getTime(),i=t.getTime();return o<i?-1:i<o?1:0},g.isValidFile=function(e,t){var o,i;if(!t.length)return!0;for(o=0,i=t.length;o<i;o++)if(-1!==e.name.toLowerCase().indexOf(t[o].toLowerCase(),e.name.length-t[o].length))return!0;return!1},g.isNonEmptyString=function(e){return"string"==typeof e&&e.length},g.clamp=function(e,t,o){return Math.min(Math.max(e,t),o)},g.timeNow=function(){return(new Date).getTime()},g.setupPopupLinks=function(){(h.isFunction(h.fn.fancybox)||h.isFunction(h.fn.magnificPopup))&&h(".quform-popup-link").each(function(){var e,t,o,i,r,n=h(this);n.data("quform-processed")||(e="#quform-"+n.data("unique-id"),t=h(e),o=n.data("options")||{},h.isFunction(h.fn.fancybox)&&h.fancybox?("3"===(r=g.getFancyboxVersion())?(i={type:"inline",baseClass:"quform-fancybox-3-popup",src:e,touch:!1,beforeClose:function(){h(".qtip").hide()},afterShow:function(e,t){window.turnstile&&t.$content.find(".quform-turnstile").each(function(){try{window.turnstile.reset(h(this).data("turnstile-id"))}catch(e){}})}},o.width&&(t.css({width:g.isNumeric(o.width)?o.width+"px":o.width}),delete o.width),o.height&&(t.css({height:g.isNumeric(o.height)?o.height+"px":o.height}).addClass("quform-max-height"),delete o.height)):"2"===r?(i={type:"inline",wrapCSS:"quform-fancybox-2-popup",href:e,beforeClose:function(){h(".qtip").hide()},afterShow:function(){window.turnstile&&this.content.find(".quform-turnstile").each(function(){try{window.turnstile.reset(h(this).data("turnstile-id"))}catch(e){}})}},(o.width||o.height)&&("undefined"==typeof o.autoSize&&(o.autoSize=!1),o.width||"undefined"!=typeof o.autoWidth||(o.autoWidth=!0),o.height||"undefined"!=typeof o.autoHeight||(o.autoHeight=!0))):"1"===r&&(i={inline:!0,href:e,onStart:function(){h("#fancybox-outer").css("opacity",0),h("#fancybox-wrap").addClass("quform-fancybox-1-popup")},onComplete:function(){window.grecaptcha&&h("#fancybox-content .quform-recaptcha").each(function(){try{window.grecaptcha.reset(h(this).data("recaptcha-id"))}catch(e){}}),window.hcaptcha&&(h("#fancybox-content .quform-hcaptcha").empty(),window.QuformHcaptchaLoaded&&window.QuformHcaptchaLoaded()),window.turnstile&&h("#fancybox-content .quform-turnstile").each(function(){try{window.turnstile.reset(h(this).data("turnstile-id"))}catch(e){}}),h("#fancybox-wrap, #fancybox-content").css({width:"auto"}),h.fancybox.center(0),setTimeout(function(){h("#fancybox-outer").animate({opacity:1},200),h("#fancybox-overlay").css({height:h(document).height()})},1)},onClosed:function(){h("#fancybox-wrap").removeClass("quform-fancybox-1-popup")}},(o.width||o.height)&&"undefined"==typeof o.autoDimensions&&(o.autoDimensions=!1),(o.width||o.height)&&t.addClass("quform-custom-dimensions")),r&&n.fancybox(h.extend({},i,o))):h.isFunction(h.fn.magnificPopup)&&(i={items:{src:t,type:"inline"},mainClass:"quform-magnific-popup",callbacks:{open:function(){window.turnstile&&this.content.find(".quform-turnstile").each(function(){try{window.turnstile.reset(h(this).data("turnstile-id"))}catch(e){}})}}},o.width&&(t.css({maxWidth:g.isNumeric(o.width)?o.width+"px":o.width}),delete o.width),o.height&&(t.css({maxHeight:g.isNumeric(o.height)?o.height+"px":o.height}).addClass("quform-max-height"),delete o.height),n.magnificPopup(h.extend({},i,o)),h.magnificPopup.instance._onFocusIn=function(e){if(h(e.target).hasClass("select2-search__field"))return!0;h.magnificPopup.proto._onFocusIn.call(this,e)}),n.data("quform-processed",!0))})},g.supportPageCaching=function(){var e;quformL10n.supportPageCaching&&(e=[],h(".quform-form").each(function(){e.push(h(this).find('input[name="quform_form_uid"]').val())}),e.length&&h.ajax({type:"GET",url:quformL10n.ajaxUrl,dataType:"json",data:{action:"quform_support_page_caching",forms:e}}).done(function(r){"success"===(r=g.sanitizeResponse(r)).type&&(h(".quform-form").each(function(){var e=h(this),t=e.data("quform"),o=e.attr("action"),i=e.find('input[name="quform_form_uid"]').val();r.forms&&g.isNonEmptyString(i)&&r.forms[i]&&g.isNonEmptyString(r.forms[i])&&(e.find('input[name="quform_form_uid"]').val(r.forms[i]),g.isNonEmptyString(o)&&(o=o.replace(/#quform-(.)+$/,"#quform-"+r.forms[i]),e.attr("action",o)),t&&(t.options.uniqueId=r.forms[i])),r.token&&g.isNonEmptyString(r.token)&&e.find('input[name="quform_csrf_token"]').val(r.token),t&&e.find(".quform-captcha-image img").length&&g.captchaRefreshFormQueue.push(t)}),g.captchaRefreshFormQueue.length&&g.processCaptchaRefreshFormQueue())}))},g.captchaRefreshFormQueue=[],g.processCaptchaRefreshFormQueue=function(){var e;g.captchaRefreshFormQueue.length&&(e=g.captchaRefreshFormQueue.shift(),h(".quform-captcha-image img",e.$form).each(function(){e.captchaRefreshQueue.push(h(this))}),e.processCaptchaRefreshQueue(function(){g.captchaRefreshFormQueue.length&&g.processCaptchaRefreshFormQueue()}))},g.isNumeric=function(e){return("number"==typeof e||"string"==typeof e)&&!isNaN(e-parseFloat(e))},e=g,window.Quform=e,h.fn.extend({quform:function(){return this.each(function(){return new e(this,h(this).data("options")||{})})},quformHideSlide:function(e,t){var o={height:"hide",opacity:"hide",marginTop:"hide",marginBottom:"hide",paddingTop:"hide",paddingBottom:"hide"},i={duration:400};return e&&(i.complete=e),t&&(o=h.extend(o,t)),this.animate(o,i)},quformShowSlide:function(e,t){var o={height:"show",opacity:"show",marginTop:"show",marginBottom:"show",paddingTop:"show",paddingBottom:"show"},i={duration:400};return e&&(i.complete=e),t&&(o=h.extend(o,t)),this.animate(o,i)}}),h(function(){h(".quform-form").quform(),e.supportPageCaching(),e.setupPopupLinks()})}(jQuery);